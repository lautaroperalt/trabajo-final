<div class="container mt-5 mb-5">
  <h2 class="mb-4 fw-bold">Gestion de categorias</h2>

  <div class="card p-4 mb-4 border-0 shadow-sm">
    <div class="d-flex gap-2">
      <input type="text" 
             class="form-control" 
             [(ngModel)]="newCategoryName" 
             placeholder="Nombre de la nueva categoría (ej: Postres)"
             (keyup.enter)="addCategory()">
      
      <button class="btn btn-primary text-nowrap" 
              (click)="addCategory()"
              [disabled]="!newCategoryName.trim()">
        <i class="bi bi-plus-lg"></i> Agregar
      </button>
    </div>
  </div>

  @if (isLoading) {
    <div class="text-center py-4">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
    </div>
  } @else {
    <div class="list-group shadow-sm">
      @for (cat of categories; track cat.id) {
        <div class="list-group-item p-3">
          <div class="row align-items-center">
          
          <div class="col">
            <span class="fw-medium fs-5 text-body-emphasis">{{ cat.name }}</span>
          </div>
          
          <div class="col-auto">
            <div class="d-flex gap-2">
              <button class="btn btn-outline-primary btn-sm d-flex align-items-center gap-2 btn-action-edit" 
                      (click)="editCategory(cat)"
                      title="Editar nombre">
                <i class="bi bi-pencil"></i> Editar
              </button>

              <button class="btn btn-outline-danger btn-sm d-flex align-items-center gap-2 btn-action-delete" 
                    (click)="deleteCategory(cat.id)"
                    title="Eliminar Categoría"> 
                    <i class="bi bi-trash"></i> Eliminar
              </button>
        </div>
      </div>
    </div>
  </div>
}
      
      @if (categories.length === 0) {
        <div class="alert alert-warning text-center mt-3">
          No hay categorias creadas aun
        </div>
      }
    </div>
  }
  
  <div class="mt-4">
    <a routerLink="/admin" class="btn btn-outline-secondary">
      <i class="bi bi-arrow-left"></i> Volver al panel
    </a>
  </div>
</div>